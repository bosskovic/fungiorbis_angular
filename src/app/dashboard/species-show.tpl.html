<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">
            <a ui-sref="dashboard.species">
                <fo-icon icon="backHistory"></fo-icon>
                <fo-icon icon="species"></fo-icon>
            </a>
            {{ species.genus }} {{ species.name }}
        </h1>
    </div>
</div>

<div class="row" ng-hide="true">
    <div class="col-lg-12">
        <div class="alert alert-danger alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <i class="fa fa-exclamation-triangle"></i> <strong>Error!</strong> Error message text here...
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 col-md-6">
        <table class="table">
            <caption class="text-left">
                <h4>
                    <fo-icon icon="systematics"></fo-icon>
                    Systematics
                </h4>
            </caption>
            <tr ng-repeat="field in systematics">
                <th>{{field.label}}</th>
                <td>
                    <a class="pointer" editable-text="species[field.field]" onbeforesave="updateField(field.field, $data)">{{species[field.field]}}</a>
                </td>
                <td class="full-width"></td>
            </tr>
        </table>
    </div>
    <div class="col-lg-6 col-md-6">
        <table class="table text-nowrap">
            <caption class="text-left">
                <h4>
                    <fo-icon icon="incontestableCharacteristics"></fo-icon>
                    Incontestable characteristics
                </h4>
            </caption>
            <tr>
                <th>Synonyms</th>
                <td>
                    <a class="pointer" editable-text="species.synonyms" onbeforesave="updateField('synonyms', $data)">{{species.synonyms}}</a>
                </td>
                <td class="full-width"></td>
            </tr>
            <tr>
                <th>Growth Type</th>
                <td>
                    <a class="pointer"
                       editable-select="species.growthType"
                       buttons="no"
                       onbeforesave="updateField('growthType', $data)"
                       e-ng-options="s.value as s.text for s in growthTypes">
                        {{ showGrowthType() }}
                    </a>
                </td>
                <td></td>
            </tr>
            <tr>
                <th>Nutritive Group</th>
                <td>
                    <a class="pointer"
                       onbeforesave="updateField('nutritiveGroup', $data)"
                       editable-select="species.nutritiveGroup"
                       buttons="no"
                       e-ng-options="s.value as s.text for s in nutritiveGroups">
                        {{ showNutritiveGroup() }}
                    </a>
                </td>
                <td></td>
            </tr>
        </table>

        <table class="table text-nowrap" ng-show="missingCharacteristics.length > 0">
            <caption class="text-left icon-alert">
                <h4>
                    <fo-icon icon="missingCharacteristics"></fo-icon>
                    Missing characteristics
                </h4>
            </caption>
            <tr>
                <td colspan="3">
                    <ul>
                        <li ng-repeat="c in missingCharacteristics">{{ c }}</li>
                    </ul>
                </td>
            </tr>
        </table>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <fo-typeahead id="referenceId" value="referenceFullTitle"
                      properties="speciesCtrl.typeAheadProperties"></fo-typeahead>
    </div>
</div>


<div class="row auto-width" ng-class="{'new-characteristic-box': referenceId}" ng-switch on="referenceId === undefined">
    <div class="col-lg-12 auto-width" ng-switch-when="false">
        <em class="dimmed" ng-show="characteristic.id">Existing record: </em>
        <em class="dimmed" ng-hide="characteristic.id">New record: </em>
        <em class="dimmed">{{ referenceFullTitle }}</em>

        <fo-characteristic-edit characteristic="characteristic"></fo-characteristic-edit>

        <button class="btn btn-primary" ng-click="speciesCtrl.saveCharacteristic()"
                ng-disabled="!dirty || emptyParams">
            <fo-icon icon="confirm"></fo-icon>
            Save
        </button>
        <button class="btn btn-primary" ng-click="speciesCtrl.reset()">
            <fo-icon icon="cancel"></fo-icon>
            Reset and close
        </button>
    </div>
</div>


<div class="row species-characteristics-row" ng-show="species.characteristics.length > 0">
    <div class="col-lg-12">
        <fo-characteristics-table
                parent="references"
                parent-id="referenceId"
                characteristic="characteristic"
                characteristics="species.characteristics"
                characteristic-row="characteristicRow"
                reset-dialog="resetDialog"
                delete-dialog="deleteDialog"
                save-characteristic="speciesCtrl.saveCharacteristic"
                reset="speciesCtrl.reset"></fo-characteristics-table>
    </div>
</div>